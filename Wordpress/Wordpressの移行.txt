Wordpressの移行

AWS EC2がCentOS7.9のためRockyLinux9.2に移行したのでWordpressの移行についてのメモ。

◆事前準備
移行先Linuxサーバで以下を実施
・Apacheインストール
・mod_sslインストール
・PHPインストール
・MariaDBインストール
・Let's Encryptによるサーバー証明書の作成

◆Wordpressの移行
★Wordpressファイルの入手、解凍、配置
・Wordpresのtar.gzファイルをダウンロードして解凍
・wordpressディレクトリの移動（/var/www/html配下など）

★Wordpressコンフィグファイルのリネーム
# mv wp-config-sample.php wp-config.php

★Wordpressコンフィグの編集
#vi wp-config.php
以下の項目を移行元からコピペする
/** WordPress のためのデータベース名 */
/** MySQL データベースのユーザー名 */
/** MySQL データベースのパスワード */
Authentication unique keys and saltsの各項目

★MariaDBにログインしてデータベースを作成（wp-config.phpの情報に合わせる）
MariaDB [(none)]> create database [データベース名];

★MariaDBでユーザーを作成（wp-config.phpの情報に合わせる）
MariaDB [(none)]> create user '[ユーザー名]'@'localhost' identified by '[パスワード]';

★作成したユーザーに権限を付与
MariaDB [mysql]> GRANT ALL PRIVILEGES ON `[データベース名]`.* TO '[ユーザー名]'@'localhost';

★念のため権限が付与されたか確認
SHOW GRANTS FOR '[ユーザー名]'@'localhost';

★移行元サーバーでDBデータをダンプ
# mysqldump -u root -p -x [データベース名] > [ファイル名].sql

★ダンプデータを移行先にコピー

★移行先サーバーでダンプデータをインポート
# mysql [データベース名] < [ファイル名].sql

★ここでWEBブラウザを使用してアクセス
The theme directory "[テーマ名]" does not exist.
上記のメッセージが表示されたら外観テーマが不足しています。（デフォルト以外のテーマを使っている場合）

★外観テーマを移行元から移行先にコピー
wp-content/themes配下に外観テーマのディレクトリがあるのでディレクトリごとコピーします。

★ここでWEBブラウザを使用してアクセス
⇒WEB画面が正しく表示されること

★プラグインのインストール
プラグインの移行は実施していないため手動でインストールします

終わりです。お疲れさまでした。


